using UnityEngine;using System.Collections;using System.Collections.Generic;using SimpleJson;
public class DialogueInfoConfigData {
public const string NAME = "DialogueInfoConfig";
private string _data="[{\"content\":\"好多波利啊，要全部打到他们吗？\",\"id\":1,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0},{\"content\":\"怎么还有。。。\",\"id\":2,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0},{\"content\":\"这是最后一群啦，快快打完提交任务啦。\",\"id\":3,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0},{\"content\":\"这是4号对话内容\",\"id\":4,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0},{\"content\":\"这是5号对话内容\",\"id\":5,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0},{\"content\":\"这是6号对话内容\",\"id\":6,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0},{\"content\":\"这是7号对话内容\",\"id\":7,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0},{\"content\":\"这是8号对话内容\",\"id\":8,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0},{\"content\":\"这是9号对话内容\",\"id\":9,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0},{\"content\":\"这是10号对话内容\",\"id\":10,\"speakerId\":1,\"leftSpeakerId\":1,\"rightSpeakerId\":0}]";
private object[] _dataJson;private List<DialogueInfoConfig> _dataList=new List<DialogueInfoConfig>();
public DialogueInfoConfigData(){_dataJson = SimpleJson.SimpleJson.DeserializeObject<JsonArray> (_data).ToArray ();foreach (object jsonObject in _dataJson) {JsonObject jo=(JsonObject) jsonObject;DialogueInfoConfig config=new DialogueInfoConfig();_dataList.Add(config);foreach(string key in jo.Keys){object value=jo[key];System.Type type =typeof(DialogueInfoConfig);System.Reflection.FieldInfo info=type.GetField(key);if(info==null){continue;}if (value is JsonArray) {JsonArray jarr=(JsonArray)value;int jarrSize=jarr.Count;if(info.FieldType.FullName=="System.Int32[]"){int[] data=new int[jarrSize];for(int i=0;i<jarrSize;i++){data[i]= (int)jarr[i];}info.SetValue (config, data);}else{string[] data=new string[jarrSize];for(int i=0;i<jarrSize;i++){data[i]= (string)jarr[i];}info.SetValue (config, data);}}else{info.SetValue(config,value);}}}_dataJson = null;_data = null;}public List<DialogueInfoConfig> getList(){return _dataList;}}